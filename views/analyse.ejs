<%- include("partials/header.ejs"); -%>

<h1>Graphical Analysis</h1>

<!-- </div> -->
<% for(var i=0; i < markDetail.length; i++){ %>
    <div id='myDiv' style="position: absolute; right:80px;">
        <!-- <h1> <%= markDetail[i].dbmsMark%> </h1>
        <h1> <%= markDetail[i].tocMark %></h1>
        <h1> <%= markDetail[i].daaMark %> </h1>
        <h1> <%= markDetail[i].osMark %></h1> -->

        <script>
            // console.log(<%= markDetail[i].osMark %>);
            
            var data = [{
                // values: [1,2,3,4],
                values: [<%= markDetail[i].dbmsMark%>,<%= markDetail[i].tocMark %>, <%= markDetail[i].daaMark %>, <%= markDetail[i].osMark %>],
                labels: ['DBMS', 'TOC', 'DAA', 'OS'],
                type: 'pie'
            }];

            var layout = {
                height: 400,
                width: 500
            };

            Plotly.newPlot('myDiv', data, layout);
            
        </script>
    </div>

    <div id='myDiv2'>
        <script>
            // console.log(dbmsMark);
            var data = [
            {
                x: ['DBMS', 'TOC', 'DAA', 'OS'],
                y: [<%= markDetail[i].dbmsMark%>,<%= markDetail[i].tocMark %>, <%= markDetail[i].daaMark %>, <%= markDetail[i].osMark %>],
                type: 'bar'
            }
            ];

            var layout = {
                barmode : 'stack',
                height: 400,
                width: 700
            };

            Plotly.newPlot('myDiv2', data, layout);
        </script>
    </div>

<% } %>

    <!-- <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d15062.175825256429!2d72.86336325!3d19.30218845!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sin!4v1693838214722!5m2!1sen!2sin" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe> -->

    <style>
        /* Set a fixed height for the map container */
        #map {
            width: 800px;
            height: 400px;
        }
    </style>


    <div id="map"></div>

    <!-- Include Leaflet.js -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

    <script>
        
        // Initialize the map
        var map = L.map('map').setView([19.0760, 72.8777], 13);

        // Add a tile layer (OpenStreetMap)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
        }).addTo(map);
        <% for(var i=0; i < markDetail.length; i++){ %>
            console.log(<%= markDetail[i].lat%>);
        // Add a marker
        // var marker = L.marker([19.0760, 72.8777]).addTo(map);
        var marker = L.marker([<%= markDetail[i].lat%>, <%= markDetail[i].lon %>]).addTo(map);

        // Add a popup to the marker
        marker.bindPopup("I am Here !").openPopup();
        <% } %>
    </script>



<%- include("partials/footer.ejs"); -%>